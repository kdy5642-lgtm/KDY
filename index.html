<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>PKG3 PI SUPT INDEX Â· ISO Â· TAG Â· TYPE ì¡°íšŒê¸°</title>

<style>
* { box-sizing: border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
  background: #f0f2f5;
  margin: 0;
  padding: 0;
}

.container {
  max-width: 980px;
  margin: 0 auto;
  background: #ffffff;
  min-height: 100vh;
  padding: 12px 14px 32px;
}

/* ìƒë‹¨ ê³ ì • ë°” */
.top-bar {
  position: sticky;
  top: 0;
  z-index: 999;
  background: #ffffff;
  padding: 10px 8px 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

/* íƒ€ì´í‹€ */
.title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 8px;
}
h1 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
}
.badge-fast {
  font-size: 11px;
  padding: 3px 8px;
  background: #e6f0ff;
  border: 1px solid #bdd3ff;
  color: #2755c7;
  border-radius: 999px;
  white-space: nowrap;
}

/* ë¼ë””ì˜¤ ë²„íŠ¼ */
.search-modes {
  display: flex;
  flex-wrap: wrap;
  gap: 10px 14px;
  margin: 10px 0 6px;
}

.search-modes label {
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 999px;
  background: #f6f7fb;
  cursor: pointer;
}

.search-modes input[type="radio"] {
  accent-color: #2563eb;
}

/* ê²€ìƒ‰ ì…ë ¥ */
.search-box {
  width: 100%;
  margin: 4px 0 6px;
}

.search-input-wrapper {
  position: relative;
  width: 100%;
}

#searchInput {
  width: 100%;
  padding: 14px 48px 14px 18px;
  font-size: 17px;
  border-radius: 999px;
  border: 1px solid #ccc;
  outline: none;
}

.clear-btn {
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  border: none;
  background: none;
  font-size: 22px;
  cursor: pointer;
  opacity: 0.5;
}
.clear-btn:hover {
  opacity: 0.9;
}

/* ë¶™ì—¬ë„£ê¸° ë°•ìŠ¤ */
.paste-wrapper {
  margin: 10px 2px 16px;
  font-size: 12px;
  color: #555;
}
#pasteToggleBtn {
  padding: 6px 12px;
  font-size: 12px;
  border-radius: 6px;
  border: 1px solid #bbb;
  background: #fff;
  cursor: pointer;
}
#pasteToggleBtn:hover {
  background: #f5f5f5;
}
#pasteBox {
  margin-top: 6px;
}
#pasteInput {
  width: 100%;
  height: 140px;
  font-size: 12px;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-family: "Consolas","Courier New",monospace;
}
#applyPaste {
  margin-top: 6px;
  padding: 6px 12px;
  font-size: 12px;
  border-radius: 6px;
  border: 1px solid #2563eb;
  background: #2563eb;
  color: #fff;
  cursor: pointer;
}
#applyPaste:hover {
  background: #1d4ed8;
}

/* í…Œì´ë¸” */
table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
}
thead {
  background: #f7f7f9;
  position: sticky;
  top: 108px; /* ìƒë‹¨ë°” ë†’ì´ì— ë§ì¶° ì¡°ì • */
  z-index: 998;
}
th, td {
  padding: 8px 10px;
  border-bottom: 1px solid #e0e0e0;
}
tbody tr:nth-child(odd) {
  background: #fcfcff;
}
tbody tr:hover {
  background: #eef6ff;
}

/* ëª¨ë°”ì¼ ëŒ€ì‘ */
@media (max-width: 600px) {
  h1 { font-size: 16px; }
  #searchInput { font-size: 18px; padding: 16px 48px 16px 18px; }
}
</style>
</head>

<body>
<div class="container">
  
  <!-- ìƒë‹¨ ê³ ì • ì˜ì—­ -->
  <div class="top-bar">
    <div class="title-row">
      <h1>INDEX Â· ISO Â· TAG Â· TYPE ì¡°íšŒê¸°</h1>
      <div class="badge-fast">í˜„ì¥ íƒœê·¸ / íƒ€ì… ë¹ ë¥¸ ì¡°íšŒ</div>
    </div>

    <!-- ë¼ë””ì˜¤ ì„ íƒ -->
    <div class="search-modes">
      <label><input type="radio" name="mode" value="index" checked><span>INDEXë¡œ ê²€ìƒ‰</span></label>
      <label><input type="radio" name="mode" value="iso"><span>ISOë¡œ ê²€ìƒ‰</span></label>
      <label><input type="radio" name="mode" value="tag"><span>TAGë¡œ ê²€ìƒ‰</span></label>
      <label><input type="radio" name="mode" value="type"><span>TYPEìœ¼ë¡œ ê²€ìƒ‰</span></label>
    </div>

    <!-- ê²€ìƒ‰ë°•ìŠ¤ -->
    <div class="search-box">
      <div class="search-input-wrapper">
        <input id="searchInput" type="text"
               placeholder="ì˜ˆ: 0001, 2152-01-007-01, 211-TRP014, TRP-DAS18 ë“±" />
        <button id="clearBtn" class="clear-btn">Ã—</button>
      </div>
    </div>
  </div>

  <!-- ë°ì´í„° ë¶™ì—¬ë„£ê¸° ì˜ì—­ (ê´€ë¦¬ìš©) -->
  <div class="paste-wrapper">
    <button id="pasteToggleBtn">ğŸ“Œ ë°ì´í„° ë¶™ì—¬ë„£ê¸° (ì—‘ì…€ì—ì„œ ë³µì‚¬ â†’ ì—¬ê¸° ë¶™ì—¬ë„£ê¸°)</button>
    <div id="pasteBox" style="display:none;">
      <textarea id="pasteInput"
        placeholder="ì˜ˆì‹œ)
0001	S211-10_SB_ISO-3TK-CFL-2152-01-007-01	211-DS004	DSP-S18-250
0001	S211-10_SB_ISO-3TK-CFL-2152-01-007-01	211-TRP014	TRP-DAS18-CG-12
0002	S211-10_SB_ISO-3TK-CFL-2152-01-007-02	ë¯¸ë°œì£¼í’ˆëª©	2152-SS-003"></textarea>
      <button id="applyPaste">ì ìš©í•˜ê¸°</button>
    </div>
  </div>

  <!-- ê²°ê³¼ í…Œì´ë¸” -->
  <table>
    <thead>
      <tr>
        <th style="width:80px;">INDEX</th>
        <th>ISO ë„ë©´ë²ˆí˜¸</th>
        <th style="width:170px;">TAG</th>
        <th style="width:170px;">TYPE</th>
      </tr>
    </thead>
    <tbody id="resultBody"></tbody>
  </table>

</div>

<script>
// =======================================
//   ë°ì´í„° ì €ì¥ ë°°ì—´ (ì²˜ìŒì—” ë¹ˆ ìƒíƒœ)
// =======================================
let rawData = [];

// =======================================
//   ê³µí†µ íŒŒì‹± í•¨ìˆ˜ (txt / ë¶™ì—¬ë„£ê¸° ë‘˜ ë‹¤ ì‚¬ìš©)
// =======================================
function parseTextToData(text) {
  const lines = text.trim().split("\n");
  const parsed = [];

  lines.forEach(line => {
    const trimmed = line.trim();
    if (!trimmed) return;
    // íƒ­, ì‰¼í‘œ, ì—¬ëŸ¬ ì¹¸ ê³µë°± ëª¨ë‘ êµ¬ë¶„ìë¡œ ì²˜ë¦¬
    let cols = trimmed.split(/[\t, ]+/g);
    if (cols.length < 4) return;

    const index = cols[0];
    const iso   = cols[1];
    const tag   = cols[2];
    const type  = cols.slice(3).join(" ");

    parsed.push([index, iso, tag, type]);
  });

  return parsed;
}

// =======================================
//   txt íŒŒì¼ì—ì„œ ë°ì´í„° ë¡œë”©
// =======================================
async function loadDataFromTxt() {
  try {
    // ìºì‹œ ë°©ì§€ìš© íŒŒë¼ë¯¸í„°(ì—…ë°ì´íŠ¸ ë°”ë¡œ ë°˜ì˜)
    const res = await fetch('suptdata.txt?_=' + Date.now());
    if (!res.ok) throw new Error('ë°ì´í„° íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
    const text = await res.text();
    const parsed = parseTextToData(text);
    if (parsed.length === 0) {
      console.warn('suptdata ë‚´ìš©ì´ ë¹„ì–´ìˆê±°ë‚˜ í˜•ì‹ì„ ì½ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
    }
    rawData = parsed;
    renderList();
  } catch (e) {
    console.error(e);
    alert('suptdataë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤');
  }
}

// =======================================
//   í•„í„° + ë Œë”ë§
// =======================================
function renderList() {
  const mode = document.querySelector('input[name="mode"]:checked').value;
  const keyword = document.getElementById("searchInput").value.trim().toLowerCase();
  const tbody = document.getElementById("resultBody");

  tbody.innerHTML = "";

  const filtered = rawData.filter(row => {
    if (!keyword) return true;
    const index = row[0].toLowerCase();
    const iso   = row[1].toLowerCase();
    const tag   = row[2].toLowerCase();
    const type  = row[3].toLowerCase();

    if (mode === "index") return index.includes(keyword);
    if (mode === "iso")   return iso.includes(keyword);
    if (mode === "tag")   return tag.includes(keyword);
    if (mode === "type")  return type.includes(keyword);

    return false;
  });

  filtered.forEach(row => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${row[0]}</td>
      <td>${row[1]}</td>
      <td>${row[2]}</td>
      <td>${row[3]}</td>
    `;
    tbody.appendChild(tr);
  });
}

// ê²€ìƒ‰ ì…ë ¥ â†’ ìë™ í•„í„°
document.getElementById("searchInput").addEventListener("input", renderList);

// X ë²„íŠ¼
document.getElementById("clearBtn").addEventListener("click", () => {
  const input = document.getElementById("searchInput");
  input.value = "";
  input.focus();
  renderList();
});

// ë¼ë””ì˜¤ ë³€ê²½ ì‹œ ì¬í•„í„°
document.querySelectorAll('input[name="mode"]').forEach(r => {
  r.addEventListener("change", renderList);
});

// =======================================
//   ë°ì´í„° ë¶™ì—¬ë„£ê¸° (ê´€ë¦¬ììš©)
// =======================================

// ë¶™ì—¬ë„£ê¸° ë°•ìŠ¤ í† ê¸€
document.getElementById("pasteToggleBtn").addEventListener("click", () => {
  const box = document.getElementById("pasteBox");
  box.style.display = (box.style.display === "none" || box.style.display === "") ? "block" : "none";
});

// "ì ìš©í•˜ê¸°" â†’ rawData ë®ì–´ì“°ê¸°
document.getElementById("applyPaste").addEventListener("click", () => {
  const txt = document.getElementById("pasteInput").value;
  if (!txt.trim()) {
    alert("ì—‘ì…€ì—ì„œ ë³µì‚¬í•œ ë°ì´í„°ë¥¼ ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”.");
    return;
  }
  const newData = parseTextToData(txt);
  if (newData.length === 0) {
    alert("ë°ì´í„° í˜•ì‹ì„ ì¸ì‹í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\nINDEX ISO TAG TYPE ìˆœì„œë¡œ 4ì¹¸ ì´ìƒì¸ì§€ í™•ì¸í•´ ì£¼ì„¸ìš”.");
    return;
  }

  rawData = newData;
  renderList();
  alert("ë°ì´í„°ê°€ ì´ í˜ì´ì§€ì—ì„œ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤!\n(suptdataëŠ” ë”°ë¡œ ìˆ˜ì •í•´ ì£¼ì„¸ìš”)");
});

// =======================================
//   í˜ì´ì§€ ë¡œë“œì‹œ suptdataì—ì„œ ìë™ ë¡œë“œ
// =======================================
loadDataFromTxt();
</script>

</body>
</html>
